#pragma once
#include "stdafx.h"
#include <windows.h>
#define COORD_00 COORD{ 0, 0 }

using namespace std;


class Console
{
private:
	// Win32 console stuff
	short width;
	short height;
	char slotMachine[17][33] =							//how the slot machine should look like
	{
		{' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' },
		{' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ',', ',', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' },
		{' ',' ', ' ', ' ', ' ', ' ', ',', '-','\'', ' ', ' ','\'', '-', ',', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' },
		{' ','+', '-', '-', '-','\'', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ','\'', '-', '-', '-', '+', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' },
		{' ','|', '$', ' ', ' ', 'M', 'A', 'G', 'I', 'C', ' ', 'S', 'L', 'O', 'T', ' ', ' ', '$', '+', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '+', ' ' },
		{' ','|', '$', ' ', ' ', '+', '-', '-', '+', '-', '-', '+', '-', '-', '+', ' ', ' ', '$', '|', ' ', ' ', 'R', 'E', 'W', 'A', 'R', 'D', 'S', ' ', ' ', '|', ' ' },
		{' ','|', '$', ' ', ' ', '|', ' ', ' ', '|', ' ', ' ', '|', ' ', ' ', '|', ' ', ' ', '$', '|', ' ', '7', '7', '7', ' ', '-', ' ', ' ', ' ', ' ', ' ', '|', ' ' },
		{' ','|', '$', ' ', ' ', '+', '-', '-', '+', '-', '-', '+', '-', '-', '+', ' ', ' ', '$', '|', ' ', 'A', 'A', 'A', ' ', '-', ' ', ' ', ' ', ' ', ' ', '|', ' ' },
		{' ','|', '$', ' ', ' ', '|', ' ', ' ', '|', ' ', ' ', '|', ' ', ' ', '|', ' ', ' ', '$', '|', ' ', 'K', 'K', 'K', ' ', '-', ' ', ' ', ' ', ' ', ' ', '|', ' ' },
		{' ','|', '$', ' ', ' ', '+', '-', '-', '+', '-', '-', '+', '-', '-', '+', ' ', ' ', '$', '|', ' ', 'Q', 'Q', 'Q', ' ', '-', ' ', ' ', ' ', ' ', ' ', '|', ' ' },
		{' ','|', '$', ' ', ' ', '|', ' ', ' ', '|', ' ', ' ', '|', ' ', ' ', '|', ' ', ' ', '$', '|', ' ', 'J', 'J', 'J', ' ', '-', ' ', ' ', ' ', ' ', ' ', '|', ' ' },
		{' ','+', '-', '-', '-', '+', '-', '-', '+', '-', '-', '+', '-', '-', '+', '-', '-', '-', '+', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '+', ' ' },
		{' ','|', 'C', 'r', 'e', 'd', 'i', 't', 's', ':', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', 'B', 'e', 't', ':', ' ', ' ', ' ', '|', ' ' },
		{' ','|', ' ', ' ', ' ', ' ', ' ', ' ', 'P', 'r', 'e', 's', 's', ' ', 'X', ' ', 't', 'o', ' ', 'p', 'l', 'a', 'y', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '|', ' ' },
		{' ','+', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '-', '+', ' ' },
		{' ',' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' }
	};

	HANDLE hConsole;
	SMALL_RECT window_size;
	COORD bufferCoord;
	CHAR_INFO *buffer_background = nullptr;
	CHAR_INFO *buffer_slot = nullptr;

public:
	Console(short, short);
	~Console();

	// Win32 console stuff
	void CopyBackgroundToSlot();
	void CopySlotToScreen();

	void DrawTextOnBuffer(CHAR_INFO *, short, short, const std::string, WORD);
	CHAR_INFO* GetCharXYInBuffer(CHAR_INFO *, short, short);

	void DrawTextOnBackground(short x, short y, const std::string, WORD);
	void DrawTextOnSlot(short x, short y, const std::string, WORD);

	void CursorHide();
	bool KeyPressed(int vKey);
	void GotoXY(short x, short y);

	// Accesors
	int GetHeight();
	int GetWidth();
};

